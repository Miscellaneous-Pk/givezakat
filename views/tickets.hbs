<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tickets</title>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:500,700,900|Roboto:100,300i,400,400i,700,900&display=swap" rel="stylesheet">
    <style media="screen">

      p {
        font-family: Roboto;
        font-size: 23px;
        line-height: 1.5;
        font-weight: 300;
        color: darkslategray;
      }

      .container {
        /* border: 1px solid red; */
        width: 1300px;
        max-width: 100vw;
        margin: 0 auto;
        padding: 0 20px;
        box-sizing: border-box;
      }

      h1 {
        font-family: Roboto;
        font-style: normal;
        font-weight: bold;
        font-size: 46px;
        /* line-height: 1.3; */
        width: 100%;
        font-weight: bold;
        color: darkslategray;
      }

      .brown {
        color: brown;
      }

      .card {
        padding: 20px;
        background: #f7f7f7;
        margin: 20px 0;
        position: relative;
      }

      .card img {
        width: 132px;
        max-height: 90%;
        position: absolute;
        right: 20px;
        top: 50%;
        transform: translate(-50%,-50%);
        padding: 2px;
        box-sizing: border-box;
        background: lightgrey;
      }

      .card > *:not(img) {
        max-width: 60%;
      }

      .card small {
        font-weight: bold;
        font-size: 19px;
        color: darkslategrey;
        display: block;
      }

      .card .serial {
        background: darkslategray;
        display: inline-block;
        padding: 8px 15px;
        font-size: 12px;
        color: white;
        border-radius: 2px;
        margin: 0px;
        font-weight: bold;
      }

      button {
        background: white;
        color: darkslategrey;
        padding: 10px 20px;
        font-size: 17px;
        border: 1px solid darkslategrey;
        display: block;
        margin-top: 18px;
        font-weight: bold;
        display: inline-block;
      }

      button.primary {
        background: darkslategrey;
        border: 1px solid darkslategrey;
        color: white;
      }

      @media (max-width: 700px) {
        p {
          font-size: 17px;
        }

        .container {

        }

        h1 {
          font-size: 35px;
        }

        .brown {
        }

        .card {

        }

        .card img {
          width: 132px;
          position: relative;
          transform: translate(0,0);
          right: 0px;
          margin-top: 16px;
          margin-bottom: 0px;
        }

        .card > *:not(img) {
          max-width: 100%;
        }

        .card small {
          font-weight: bold;
          font-size: 19px;
          color: darkslategrey;
          display: block;
          margin-bottom: 20px;
        }

        .card .serial {

        }

        button {
          background: white;
          color: darkslategrey;
          padding: 8px 16px;
          font-size: 15px;
          margin-top: 4px;
        }

        button.primary {

        }
      }
    </style>
  </head>
  <body>
    <div class="container">

      {{> breadcrumb tier="2"}}

      {{#unless msg}}
        <p>No ticket was found. Please Generate One by clicking <a href='/createticket' target=_blank>here</a>.</p>
      {{/unless}}


      {{#each msg}}
      <div class="card">
        <p class="serial">Ticket No # {{this.ser}}</p>
        <img src="{{this.img}}" alt="">
        <h1 class=""> {{this.heading}}</h1>
        <p> {{this.description}}</p>
        <small>Generated by {{this.name}}</small>
        <button class="primary" type="button" name="button" onclick="window.location.assign(`/ticket?ser={{this.ser}}`)">View</button>
        <button type="button" name="button" onclick="window.location.assign(`/editticket?ser={{this.ser}}`)">Edit</button>
        <button type="button" name="button" onclick="deleteMe({{this.ser}})">Delete</button>
        <button type="button" name="button" onclick="window.location.assign(`/updateDonations?ser={{this.ser}}`)">Add Donation</button>
      </div>
      {{/each}}

  <script type="text/javascript">

    function deleteMe(ser) {
      console.log('herl');
      if (confirm('Are you sure you want to delete this ticket?')) {
        // Save it!
        window.location.assign(`/deleteticket?ser=${ser}`);
      } else {
        // Do nothing!
        console.log('Ok nothing done');
      }
    };
  </script>
  </body>
</html>
